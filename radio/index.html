<!DOCTYPE html>
<html>
<head>
  <title id="radio_name2">ðŸŽ§ Masterk3y Radio Player</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>
  <script src="js/parser.min.js"></script>
  
  <script>

    var playlist;
  
    // Fetch the playlist file, using xhr for example
    var xhr = new XMLHttpRequest();
    xhr.open("GET", "./estaciones.m3u");
    xhr.overrideMimeType("audio/x-mpegurl"); // Needed, see below.
    xhr.onload = parse;
    xhr.send();
    
    // Parse it
    function parse () {
        var playlist = M3U.parse(this.response);
        console.log(playlist)
        var options = document.getElementById("selection");
        for (var i = 0; i < playlist.length; i++){
            var option = document.createElement("option");
            option.text = playlist[i].artist;
            option.text = playlist[i].title;
            option.value = playlist[i].file;
            option.setAttribute("data-icon", "glyphicon-music");
            options.add(option);
        }
        $('.selectpicker').selectpicker('refresh');
    };
  
    $(document).ready(function() {

        $('#selection').on('change', function() {
            change($(this).val(), $(this).find('option:selected').text());
        });

    });


    function change(sourceUrl, name) {
        var audio = document.getElementById("player");
        var source = document.getElementById("radio_source");
        var title = document.getElementById("radio_name");
        var title2 = document.getElementById("radio_name2");

        

        if (sourceUrl != "none") {
            audio.pause();
            title2.innerHTML = name
            title.innerHTML = name
            source.src = sourceUrl;
            audio.load();
            audio.play();
        }
    }
  </script>
  
</head>
<style>
    body {
  background-color: #202020;
  color:#E7062A;
  
}
a {
  color:#E7062A;
}
</style>

<body>

    <div class="container text-center">
        
        
        <div style="padding-top: 25%;">
        <h3>ðŸ“»<q id="radio_name">Radio</q> en <a href="https://orlandohc.netlify.app"> Radio Master</a></h3>
        <br><br><br><br>
        <audio id="player" controls>
            <source id="radio_source" src="none">
            Your browser does not support the audio element.
        </audio>

        <br>
        <br><br><br><br>
        <select id="selection" class="selectpicker show-tick" data-live-search="true">
            <option data-icon="glyphicon-flash" value="none" selected>- Seleccionar estaciÃ³n -</option>
            <optgroup label="Local">            
            <option value="https://stream-149.zeno.fm/temlrqbzt0vvv?zs=_OdXBeClQ_OykmI-d9_fnA
            ">ðŸŽµ XENR</option>
            <option value="https://streamingcwsradio30.com:7080/stream/1/">ðŸŽµ LikeFM</option>
            <option value="https://ais-sa3.cdnstream1.com/2695_64.aac">ðŸŽµ La Rancherita del Aire</option>
            <option value="https://22113.live.streamtheworld.com/XHAWFM_SC">ðŸŽµ AW 101.3 Mty</option>
            <option value="https://radioenhd.com/8212/;">ðŸŽµ Radio Centro Apizaco</option>
        </optgroup>
        <optgroup label="Electro">
            <option value="https://stream.streamaudio.de:8000/noize-nacion-radio">ðŸŽµ Noize NaciÃ³n</option>
            <option value="https://113fm.cdnstream1.com/1736_128?cb=139271.mp3">ðŸŽµ113.FM BPM</option>
        </optgroup>
        <optgroup label="Top Hits">
            <option value="https://26453.live.streamtheworld.com/977_HITSAAC_SC">ðŸŽµ.977 Hits</option>
            <option value="https://pureplay.cdnstream1.com/6027_128.mp3">ðŸŽµ Hot Hitz</option>
            <option value="https://infra.roadfm.fr/listen/road_fm/roadfm128">ðŸŽµ RoadFM</option>
            <option value="https://live.truckers.fm/">ðŸŽµ Truckers</option>
        </optgroup>
        <optgroup label="Rock">
            <option value="https://listen.181fm.com/181-buzz_128k.mp3">ðŸŽµ The Buzz</option>
        </optgroup>
        <optgroup label="Country">
            <option value="https://das-edge09-live365-dal03.cdnstream.com/a76502">ðŸŽµ Reel Countri WI</option>
        </optgroup>
        <optgroup label="Jazz/Clasica/Romantica">
            <option value="https://das-edge09-live365-dal03.cdnstream.com/a49349">ðŸŽµ Smooth Jazz NY</option>
            <option value="https://orlandohc.000webhostapp.com/media/emotion.mp3">ðŸŽµ Emotion Vice City</option>
        </optgroup>
        <optgroup label="Noticias/Clima">
            <option value="https://26353.live.streamtheworld.com/XEDAFM_SC">ðŸŽµ IMAGEN Saltillo</option>
            <option value="https://n08.radiojar.com/bfews6ef3p8uv?rj-ttl=5&rj-tok=AAABj_seON8AmMUnLbt8YuKdAg">ðŸŽµ Radio Formula TorreÃ³n</option>
            <option value="https://radio.weatherusa.net/NWR/KHB41_2.mp3">ðŸŽµ NOAA Corpus Christi TX</option>
        </optgroup>
        </select>
    
       </div>
    </div>
</body>
</html>
