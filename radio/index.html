<!DOCTYPE html>
<html>

<head>
  <title>ðŸŽ§ Masterk3y Radio Player</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>
  <script src="js/parser.min.js"></script>
  
  <script>
  
    var playlist;
  
    // Fetch the playlist file, using xhr for example
    var xhr = new XMLHttpRequest();
    xhr.open("GET", "./estaciones.m3u");
    xhr.overrideMimeType("audio/x-mpegurl"); // Needed, see below.
    xhr.onload = parse;
    xhr.send();
    
    // Parse it
    function parse () {
        var playlist = M3U.parse(this.response);
        console.log(playlist)
        var options = document.getElementById("selection");
        for (var i = 0; i < playlist.length; i++){
            var option = document.createElement("option");
            option.text = playlist[i].artist;
            option.text = playlist[i].title;
            option.value = playlist[i].file;
            option.setAttribute("data-icon", "glyphicon-music");
            options.add(option);
        }
        $('.selectpicker').selectpicker('refresh');
    };
  
    $(document).ready(function() {

        $('#selection').on('change', function() {
            change($(this).val(), $(this).find('option:selected').text());
        });

    });


    function change(sourceUrl, name) {
        var audio = document.getElementById("player");
        var source = document.getElementById("radio_source");
        var title = document.getElementById("radio_name");

        if (sourceUrl != "none") {
            audio.pause();
            title.innerHTML = name
            source.src = sourceUrl;
            audio.load();
            audio.play();
        }
    }
  </script>
  
</head>
<style>
    body {
  background-color: #F0F0E8;
}
#logo {
    display:block;
    max-width: 300px;
    margin: 0 auto;
    width: 90%;
}
</style>

<body>
    

    <div class="container text-center">
        
        <div>
        <!--<img src="img/logo.png" width="400" class="logo" style="padding-top: 10%;" alt="">-->
        </div>
        <div style="padding-top: 25%;">
        <h3>ðŸ“» <q id="radio_name">Radios</q> <a href="https://orlandohc.netlify.app"> Masterk3y</a> ðŸ’¬</h3>
        <audio id="player" controls>
            <source id="radio_source" src="none">
            Your browser does not support the audio element.
        </audio>
        <div>&nbsp;</div>
        <select id="selection" class="selectpicker show-tick" data-live-search="true">
            <option data-icon="glyphicon-flash" value="none" selected>- Seleccionar estaciÃ³n -</option>
            <optgroup label="LOCAL">            
            <option value="https://stream-149.zeno.fm/temlrqbzt0vvv?zs=_OdXBeClQ_OykmI-d9_fnA
            ">ðŸŽµ XENR</option>
            <option value="https://streamingcwsradio30.com:7080/stream/1/">ðŸŽµ LikeFM</option>
            <option value="https://ais-sa3.cdnstream1.com/2695_64.aac">ðŸŽµ La Rancherita del Aire</option>
            <option value="https://22113.live.streamtheworld.com/XHAWFM_SC">ðŸŽµ AW 101.3 Mty</option>
            <option value="https://radioenhd.com/8212/;">ðŸŽµ Radio Centro Apizaco</option>
        </optgroup>
        <optgroup label="ELECTRO">
            <option value="https://stream.streamaudio.de:8000/noize-nacion-radio">ðŸŽµ Noize NaciÃ³n</option>
        </optgroup>
        <optgroup label="Top Hits">
            <option value="https://26453.live.streamtheworld.com/977_HITSAAC_SC">ðŸŽµ.977 Hits</option>
            <option value="https://pureplay.cdnstream1.com/6027_128.mp3">ðŸŽµ Hot Hitz</option>
            <option value="https://infra.roadfm.fr/listen/road_fm/roadfm128">ðŸŽµ RoadFM</option>
            <option value="https://live.truckers.fm/">ðŸŽµ Truckers</option>
        </optgroup>
        <optgroup label="Rock">
            <option value="https://listen.181fm.com/181-buzz_128k.mp3">ðŸŽµ The Buzz</option>
        </optgroup>
        <optgroup label="Jazz/Clasica">
            <option value="https://das-edge09-live365-dal03.cdnstream.com/a49349">ðŸŽµ Smooth Jazz NY</option>
        </optgroup>
        <optgroup label="Noticias">
            <option value="https://26353.live.streamtheworld.com/XEDAFM_SC">ðŸŽµ IMAGEN Saltillo</option>
        </optgroup>
        </select>
       
    </div>

</body>
</html>
